Job ID: 8558409
Node: node3000
Start time: Thu Jan 29 23:56:02 EST 2026
Running Experiment 2: Gate Localization
==================================================
Initializing model...
Loading model Qwen/Qwen2.5-1.5B-Instruct...
Model loaded successfully!

Loading datasets...

============================================================
STEP 1: MINIMAL-SUFFICIENT WINDOW SWEEP
============================================================

============================================================
WINDOW SWEEP: Minimal-Sufficient Layer Windows
============================================================
Testing window sizes: [1, 2, 3]
Testing 10 example pairs

--- Testing 1-layer windows ---

--- Testing 2-layer windows ---

--- Testing 3-layer windows ---

Window sweep results saved to results/exp2_window_sweep.csv

Best window identified: [0] (center: layer 0)

============================================================
STEP 2: PATCH POSITION SWEEP
============================================================

============================================================
POSITION SWEEP: Token Position Sensitivity
============================================================
Testing layer 0
Positions: last token, second-to-last, first token

Error at pair 0: 'layer_0'

Error at pair 1: 'layer_0'

Error at pair 2: 'layer_0'

Error at pair 3: 'layer_0'

Error at pair 4: 'layer_0'

Error at pair 5: 'layer_0'

Error at pair 6: 'layer_0'

Error at pair 7: 'layer_0'

Error at pair 8: 'layer_0'

Error at pair 9: 'layer_0'

Position sweep results saved to results/exp2_position_sweep.csv

============================================================
STEP 3: NEGATIVE CONTROLS
============================================================

============================================================
NEGATIVE CONTROLS
============================================================
Testing layer 0

Negative control results saved to results/exp2_negative_controls.csv

============================================================
STEP 4: MIXING/INTERPOLATION SWEEP
============================================================

============================================================
MIXING SWEEP: Patch Magnitude Interpolation
============================================================
Testing window: [0]
Alpha values: [0.25, 0.5, 0.75, 1.0]

--- Testing alpha=0.25 ---

--- Testing alpha=0.5 ---

--- Testing alpha=0.75 ---

--- Testing alpha=1.0 ---

Mixing sweep results saved to results/exp2_mixing_sweep.csv

============================================================
COMPREHENSIVE ANALYSIS
============================================================

============================================================
EXPERIMENT 2: COMPREHENSIVE ANALYSIS
============================================================

--- WINDOW SWEEP ANALYSIS ---

Effect by window size:
            delta_margin             flipped
                    mean    std  max    mean
window_size                                 
1                  0.129  0.687  2.0   0.093
2                  0.071  0.696  2.0   0.079
3                  0.138  0.755  2.0   0.108

Best window for each size:
  k=1: [0-0] → Δ=2.000, flip=100.0%
  k=2: [4-5] → Δ=2.000, flip=100.0%
  k=3: [0-2] → Δ=2.000, flip=100.0%
  k=1-layer window achieves 100.0% of max effect
  k=2-layer window achieves 100.0% of max effect
  k=3-layer window achieves 100.0% of max effect

--- NEGATIVE CONTROLS ANALYSIS ---

Effect by patch type:
  correct_patch       : Δ=0.200, flip=10.0%
  random_prompt       : Δ=0.200, flip=10.0%
  wrong_position      : Δ=-0.400, flip=0.0%

Random/Correct ratio: 100.00% (should be near 0)

--- MIXING SWEEP ANALYSIS ---

Effect by mixing coefficient:
       delta_margin  flipped
alpha                       
0.25            0.0      0.0
0.50            0.0      0.0
0.75            0.0      0.0
1.00            0.2      0.1

Monotonic increase: True (expected for real gating)

Comprehensive figure saved to results/exp2_comprehensive_analysis.png

============================================================
SUMMARY TABLE: Best Window vs Controls
============================================================

        Configuration Δ Margin Flip Rate    Type
1-layer window [0-0]    2.000    100.0%  Window
2-layer window [4-5]    2.000    100.0%  Window
3-layer window [0-2]    2.000    100.0%  Window
       Correct patch    0.200     10.0% Control
      Wrong position   -0.400      0.0% Control
       Random prompt    0.200     10.0% Control


Summary table saved to results/exp2_summary_table.csv
==================================================
Experiment 2 completed at: Fri Jan 30 00:12:22 EST 2026
Check results in ./results/
