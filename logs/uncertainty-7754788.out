
================================================================================
 STARTING PIPELINE: QUICK MODE
 Model: Qwen/Qwen2.5-1.5B-Instruct
 Time: 2026-01-06 19:19:36.706792
================================================================================

CUDA available: True
GPU: NVIDIA L40S
GPU Memory: 47.67 GB

[1/6] Preparing datasets...
  Ambiguous: 10
  Answerable: 5
  Unanswerable: 5

[2/6] Loading model...
Loading model Qwen/Qwen2.5-1.5B-Instruct...
Model loaded successfully!
  Loaded in 4.0s

[4/6] Running Experiment 2: Gate Localization...

============================================================
EXPERIMENT 2: Gate Localization
============================================================
Testing 5 example pairs
Across 14 layers (stride=2)


Results saved to results/exp2_raw_results.csv

============================================================
EXPERIMENT 2: ANALYSIS
============================================================

Layer-wise Patching Effects:
      delta_margin              flipped
              mean    std count    mean
layer                                  
0              0.0  0.000     5     0.0
2              0.0  0.000     5     0.0
4              0.0  0.000     5     0.0
6             -0.4  0.894     5     0.0
8             -0.4  0.894     5     0.0
10            -0.4  0.894     5     0.0
12            -0.4  0.894     5     0.0
14            -0.4  0.894     5     0.0
16             0.0  0.000     5     0.0
18             0.4  0.894     5     0.2
20             0.0  0.000     5     0.0
22             0.0  0.000     5     0.0
24             0.0  0.000     5     0.0
26             0.0  0.000     5     0.0

Critical Layers (delta > 0.000):
[18]

Late-layer concentration:
  Critical layers after layer 16: 1/1
  Proportion: 100.0%

Maximum effect at layer 18: Δ=0.400
Maximum flip rate at layer 18: 20.0%

Figure saved to results/exp2_localization_analysis.png
  ✓ Complete - Target layers: [18]

[5/6] Running Experiment 3: Steering Control...

============================================================
EXPERIMENT 3: Steering Control (FIXED)
============================================================

Computing steering directions...
  Computing steering direction for layer 18...
    Direction norm before normalization: 26.9375
    POS activation norm: 56.9375
    NEG activation norm: 58.8750
  Layer 18: direction shape = torch.Size([1, 1536])

Testing steering effects...

Error on layer 18, epsilon 0.5: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 0.5: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 0.5: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 0.5: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 0.5: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 1.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 1.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 1.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 1.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 1.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 2.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 2.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 2.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 2.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 2.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 4.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 4.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 4.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 4.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 4.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 8.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 8.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 8.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 8.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

Error on layer 18, epsilon 8.0: 'Qwen2ForCausalLM' object has no attribute 'layers'

=== STEERING DIAGNOSTIC ===
Total tests: 5
Non-zero deltas: 0
Flips: 0

❌ ERROR: 'answer_changed'
